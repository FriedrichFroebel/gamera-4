<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<title>Image types</title>
<link rel="stylesheet" href="default.css" type="text/css" />
</head>
<body>
<div class="document" id="image-types">
<h1 class="title">Image types</h1>

<p><strong>Last modified</strong>: October 23, 2022</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#pixel-types" id="toc-entry-1">Pixel types</a></li>
<li><a class="reference internal" href="#storage-formats" id="toc-entry-2">Storage formats</a></li>
<li><a class="reference internal" href="#image-methods" id="toc-entry-3">Image methods</a><ul>
<li><a class="reference internal" href="#constructors" id="toc-entry-4">Constructors</a><ul>
<li><a class="reference internal" href="#image-init" id="toc-entry-5"><tt class="docutils literal">Image.__init__</tt></a></li>
<li><a class="reference internal" href="#subimage-init" id="toc-entry-6"><tt class="docutils literal">SubImage.__init__</tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pixel-access" id="toc-entry-7">Pixel access</a><ul>
<li><a class="reference internal" href="#get" id="toc-entry-8"><tt class="docutils literal">get</tt></a></li>
<li><a class="reference internal" href="#set" id="toc-entry-9"><tt class="docutils literal">set</tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#informational" id="toc-entry-10">Informational</a><ul>
<li><a class="reference internal" href="#pixel-type-name" id="toc-entry-11"><tt class="docutils literal">pixel_type_name</tt></a></li>
<li><a class="reference internal" href="#storage-format-name" id="toc-entry-12"><tt class="docutils literal">storage_format_name</tt></a></li>
<li><a class="reference internal" href="#memory-size" id="toc-entry-13"><tt class="docutils literal">memory_size</tt></a></li>
<li><a class="reference internal" href="#resolution" id="toc-entry-14"><tt class="docutils literal">resolution</tt></a></li>
<li><a class="reference internal" href="#white" id="toc-entry-15"><tt class="docutils literal">white</tt></a></li>
<li><a class="reference internal" href="#black" id="toc-entry-16"><tt class="docutils literal">black</tt></a></li>
<li><a class="reference internal" href="#label" id="toc-entry-17"><tt class="docutils literal">label</tt></a></li>
<li><a class="reference internal" href="#data" id="toc-entry-18"><tt class="docutils literal">data</tt></a></li>
<li><a class="reference internal" href="#ncols" id="toc-entry-19"><tt class="docutils literal">ncols</tt></a></li>
<li><a class="reference internal" href="#nrows" id="toc-entry-20"><tt class="docutils literal">nrows</tt></a></li>
<li><a class="reference internal" href="#offset-x" id="toc-entry-21"><tt class="docutils literal">offset_x</tt></a></li>
<li><a class="reference internal" href="#offset-y" id="toc-entry-22"><tt class="docutils literal">offset_y</tt></a></li>
<li><a class="reference internal" href="#ul" id="toc-entry-23"><tt class="docutils literal">ul</tt></a></li>
<li><a class="reference internal" href="#ur" id="toc-entry-24"><tt class="docutils literal">ur</tt></a></li>
<li><a class="reference internal" href="#ll" id="toc-entry-25"><tt class="docutils literal">ll</tt></a></li>
<li><a class="reference internal" href="#lr" id="toc-entry-26"><tt class="docutils literal">lr</tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#bounding-box" id="toc-entry-27">Bounding box</a></li>
<li><a class="reference internal" href="#classification" id="toc-entry-28">Classification</a></li>
</ul>
</li>
<li><a class="reference internal" href="#special-image-views" id="toc-entry-29">Special image views</a><ul>
<li><a class="reference internal" href="#connected-components" id="toc-entry-30">Connected Components</a><ul>
<li><a class="reference internal" href="#init" id="toc-entry-31"><tt class="docutils literal">__init__</tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#multi-label-connected-components" id="toc-entry-32">Multi-Label Connected Components</a><ul>
<li><a class="reference internal" href="#init-1" id="toc-entry-33"><tt class="docutils literal">__init__</tt></a></li>
<li><a class="reference internal" href="#has-label" id="toc-entry-34"><tt class="docutils literal">has_label</tt></a></li>
<li><a class="reference internal" href="#get-labels" id="toc-entry-35"><tt class="docutils literal">get_labels</tt></a></li>
<li><a class="reference internal" href="#add-label" id="toc-entry-36"><tt class="docutils literal">add_label</tt></a></li>
<li><a class="reference internal" href="#remove-label" id="toc-entry-37"><tt class="docutils literal">remove_label</tt></a></li>
<li><a class="reference internal" href="#relabel" id="toc-entry-38"><tt class="docutils literal">relabel</tt></a></li>
<li><a class="reference internal" href="#convert-to-cc" id="toc-entry-39"><tt class="docutils literal">convert_to_cc</tt></a></li>
<li><a class="reference internal" href="#convert-to-cc-list" id="toc-entry-40"><tt class="docutils literal">convert_to_cc_list</tt></a></li>
<li><a class="reference internal" href="#get-neighbors" id="toc-entry-41"><tt class="docutils literal">get_neighbors</tt></a></li>
<li><a class="reference internal" href="#add-neighbors" id="toc-entry-42"><tt class="docutils literal">add_neighbors</tt></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#image-functions" id="toc-entry-43">Image functions</a><ul>
<li><a class="reference internal" href="#file" id="toc-entry-44">File</a><ul>
<li><a class="reference internal" href="#load-image" id="toc-entry-45"><tt class="docutils literal">load_image</tt></a></li>
<li><a class="reference internal" href="#image-info" id="toc-entry-46"><tt class="docutils literal">image_info</tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#gui" id="toc-entry-47">GUI</a><ul>
<li><a class="reference internal" href="#display-multi" id="toc-entry-48"><tt class="docutils literal">display_multi</tt></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Editors:</th><td class="field-body">Michael Droettboom, Christoph Dalitz</td>
</tr>
</tbody>
</table>
<p>There are a number of different image types in Gamera that serve
different purposes.  Fortunately, they all share a common interface,
which allows many operations on images to be compiled for different
image types from the same source code using C++ templates.  This is
why <em>all</em> Gamera plugin methods are templatized (see <a class="reference external" href="writing_plugins.html">Writing Gamera
Plugins</a>).</p>
<p>Image types are specified on two axes: 1] the type of pixels the
contain, and 2] the storage type:</p>
<div class="section" id="pixel-types">
<h1><a class="toc-backref" href="#toc-entry-1">Pixel types</a></h1>
<p>The pixels in an image can be one of the following types:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">RGB</tt></dt>
<dd>24-bit color pixels (8-bits per pixel),
representing 2 ^ 24 (16,777,216) different colors.
<tt class="docutils literal">RGBPixel</tt> objects have some special <a class="reference external" href="gamera.core.RGBPixel.html">properties and methods</a>.</dd>
</dl>
</blockquote>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">GREYSCALE</tt></dt>
<dd>8-bit greyscale, representing 256 different levels
of grey.</dd>
<dt><tt class="docutils literal">GREY16</tt></dt>
<dd>16-bit greyscale, representing 65,536 different levels of
grey.</dd>
<dt><tt class="docutils literal">ONEBIT</tt></dt>
<dd>For black-and-white images.  The underlying representation is
actually 16 bits-per-pixel, since <a class="reference external" href="plugins.html#cc-analysis">connected component
labelling</a> stores information with each pixel.  This seems
like wasted space, but since connected component labelling is
so common in Gamera, it more often is a space savings from the
fact that the image data can be &quot;shared.&quot;</dd>
<dt><tt class="docutils literal">FLOAT</tt></dt>
<dd>Double-precision floating point greyscale.  This is useful for images
that need a really wide dynamic range.</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Unfortunately, at this time <tt class="docutils literal">FLOAT</tt> images cannot be saved
or loaded.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When <tt class="docutils literal">FLOAT</tt> images are displayed in the GUI, the
output is automatically &quot;normalized&quot; so that the total range in
the image is equal to the range of brightnesses your monitor can
display.</p>
</div>
</blockquote>
<p>The pixel type of an image can be retrieved in two ways.</p>
<div class="highlight"><pre><span></span><span class="n">image</span><span class="o">.</span><span class="n">pixel_type_name</span>
</pre></div>
<p>returns a string which is one of <tt class="docutils literal">RGB</tt>, <tt class="docutils literal">GreyScale</tt>, <tt class="docutils literal">Grey16</tt>,
<tt class="docutils literal">OneBit</tt> or <tt class="docutils literal">Float</tt>.</p>
<div class="highlight"><pre><span></span><span class="n">image</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">pixel_type</span>
</pre></div>
<p>returns an integer which will be one of the constants <tt class="docutils literal">RGB</tt>,
<tt class="docutils literal">GREYSCALE</tt>, <tt class="docutils literal">GREY16</tt>, <tt class="docutils literal">ONEBIT</tt> or <tt class="docutils literal">FLOAT</tt>.</p>
</div>
<div class="section" id="storage-formats">
<h1><a class="toc-backref" href="#toc-entry-2">Storage formats</a></h1>
<p>Gamera has two ways of storing the image data in memory behind the scenes:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">DENSE</tt></dt>
<dd>Uncompressed.  The image data is a contiguous chunk of memory
that is addressed in row-major order (left-to-right,
top-to-bottom).</dd>
<dt><tt class="docutils literal">RLE</tt></dt>
<dd>Run-length encoded.  For certain kinds of images,
run-length-encoding can be a performance improvement since
less data needs to be transferred between main memory and the
CPU.</dd>
</dl>
</blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">At present, <tt class="docutils literal">RLE</tt> is only available for <tt class="docutils literal">ONEBIT</tt> images.</p>
</div>
<p>The storage format of an image can be determined in two ways.</p>
<div class="highlight"><pre><span></span><span class="n">image</span><span class="o">.</span><span class="n">storage_format_name</span><span class="p">()</span>
</pre></div>
<p>returns a string which is either <tt class="docutils literal">Dense</tt> or <tt class="docutils literal">RLE</tt>.</p>
<div class="highlight"><pre><span></span><span class="n">image</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">storage_format</span>
</pre></div>
<p>returns an integer corresponding to the constants <tt class="docutils literal">DENSE</tt> and <tt class="docutils literal">RLE</tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any performance improvement should be justified only
by profiling on real-world data</p>
</div>
</div>
<div class="section" id="image-methods">
<h1><a class="toc-backref" href="#toc-entry-3">Image methods</a></h1>
<p>The methods on images include all of the plugin methods in the current
environment.  These are documented in the <a class="reference external" href="plugins.html">plugin reference</a>.  In
addition, there are number of core properties and methods.</p>
<div class="section" id="constructors">
<h2><a class="toc-backref" href="#toc-entry-4">Constructors</a></h2>
<div class="section" id="image-init">
<h3><a class="toc-backref" href="#toc-entry-5"><tt class="docutils literal">Image.__init__</tt></a></h3>
<p><p>The Image constructor creates a new image with newly allocated underlying data.</p>
<p>There are multiple ways to create an Image:</p>
<blockquote>
<ul class="simple">
<li><strong>Image</strong> (Point <em>upper_left</em>, Point <em>lower_right</em>, Choice <em>pixel_type</em> = ONEBIT, Choice <em>format</em> = DENSE)</li>
<li><strong>Image</strong> (Point <em>upper_left</em>, Size <em>size</em>, Choice <em>pixel_type</em> = ONEBIT, Choice <em>format</em> = DENSE)</li>
<li><strong>Image</strong> (Point <em>upper_left</em>, Dim <em>dim</em>, Choice <em>pixel_type</em> = ONEBIT, Choice <em>format</em> = DENSE)</li>
<li><strong>Image</strong> (Rect <em>rectangle</em>, Choice <em>pixel_type</em> = ONEBIT, Choice <em>format</em> = DENSE)</li>
<li><strong>Image</strong> (Image <em>image</em>, Choice <em>pixel_type</em> = ONEBIT, Choice <em>format</em> = DENSE)</li>
</ul>
</blockquote>
<p><strong>Deprecated forms:</strong></p>
<blockquote>
<ul class="simple">
<li><strong>Image</strong> (Point <em>upper_left</em>, Dimensions <em>dimensions</em>, Choice <em>pixel_type</em> = ONEBIT, Choice <em>format</em> = DENSE)</li>
<li><strong>Image</strong> (Int <em>offset_y</em>, Int <em>offset_x</em>, Int <em>nrows</em>, Int <em>ncols</em>, Choice <em>pixel_type</em> = ONEBIT, Choice <em>format</em> = DENSE)</li>
</ul>
</blockquote>
<p>Note that the constructor taking an Image creates a new image with the same position
and dimensions as the passed in image, but does not copy the data.
(For that, use image_copy).</p>
<dl class="docutils">
<dt><em>pixel_type</em></dt>
<dd>An integer value specifying the type of the pixels in the image.
See <a class="reference external" href="image_types.html#pixel-types">pixel types</a> for more information.</dd>
</dl>
<dl class="docutils">
<dt><em>storage_format</em></dt>
<dd>An integer value specifying the method used to store the image data.
See <a class="reference external" href="image_types.html#storage-formats">storage formats</a> for more information.</dd>
</dl>
</p>
</div>
<div class="section" id="subimage-init">
<h3><a class="toc-backref" href="#toc-entry-6"><tt class="docutils literal">SubImage.__init__</tt></a></h3>
<p><p>Creates a new view on existing data.</p>
<p>There are a number of ways to create a subimage:</p>
<blockquote>
<ul class="simple">
<li><strong>SubImage</strong> (Image <em>image</em>, Point <em>upper_left</em>, Point <em>lower_right</em>)</li>
<li><strong>SubImage</strong> (Image <em>image</em>, Point <em>upper_left</em>, Size <em>size</em>)</li>
<li><strong>SubImage</strong> (Image <em>image</em>, Point <em>upper_left</em>, Dim <em>dim</em>)</li>
<li><strong>SubImage</strong> (Image <em>image</em>, Rect <em>rectangle</em>)</li>
</ul>
</blockquote>
<p><strong>Deprecated forms:</strong></p>
<blockquote>
<ul class="simple">
<li><strong>SubImage</strong> (Image <em>image</em>, Point <em>upper_left</em>, Dimensions <em>dimensions</em>)</li>
<li><strong>SubImage</strong> (Image <em>image</em>, Int <em>offset_y</em>, Int <em>offset_x</em>, Int <em>nrows</em>, Int <em>ncols</em>)</li>
</ul>
</blockquote>
<p>Changes to subimages will affect all other subimages viewing the same data.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The <em>upper_left</em> and <em>lower_right</em> coordinates are absolute and not
relative to the image origin. Hence, for all practical use cases, you must
add the image offset to the coordinates, e.g.:</p>
<pre class="last literal-block">
subimg = SubImage(image, Point(p.x + image.offset_x, p.y + image.offset_y), dim)
</pre>
</div>
</p>
</div>
</div>
<div class="section" id="pixel-access">
<h2><a class="toc-backref" href="#toc-entry-7">Pixel access</a></h2>
<div class="section" id="get">
<h3><a class="toc-backref" href="#toc-entry-8"><tt class="docutils literal">get</tt></a></h3>
<p><strong>get</strong> (Point <em>p</em>)</p>
<p>Gets a pixel value at the given (<em>x</em>, <em>y</em>) coordinate.</p>
<p>A 2-element sequence may be used in place of the <tt class="docutils literal">Point</tt> argument.  For instance, the following are all equivalent:</p>
<div class="highlight"><pre><span></span><span class="n">px</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">px</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">px</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</pre></div>
<p>This coordinate is relative to the image view, not the absolute coordinates.</p>
</div>
<div class="section" id="set">
<h3><a class="toc-backref" href="#toc-entry-9"><tt class="docutils literal">set</tt></a></h3>
<p><strong>set</strong> (Point <em>p</em>, Pixel <em>value</em>)</p>
<p>Sets a pixel value at the given (<em>x</em>, <em>y</em>) coordinate.</p>
<p>A 2-element sequence may be used in place of the <tt class="docutils literal">Point</tt> argument.  For instance, the following are all equivalent:</p>
<div class="highlight"><pre><span></span><span class="n">image</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">set</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
<p>This coordinate is relative to the image view, not the absolute coordinates.</p>
</div>
</div>
<div class="section" id="informational">
<h2><a class="toc-backref" href="#toc-entry-10">Informational</a></h2>
<p>These methods provide information about the image.</p>
<div class="section" id="pixel-type-name">
<h3><a class="toc-backref" href="#toc-entry-11"><tt class="docutils literal">pixel_type_name</tt></a></h3>
<p>String <strong>pixel_type_name</strong> ()</p>
<p>Returns a string representing the pixel type of the image. Intended
primarily for display (GUI) purposes, since using the integer values
in <tt class="docutils literal">Image.data.pixel_type</tt> is more efficient.</p>
<p>See <a class="reference internal" href="#pixel-types">pixel types</a> for more information.</p>
</div>
<div class="section" id="storage-format-name">
<h3><a class="toc-backref" href="#toc-entry-12"><tt class="docutils literal">storage_format_name</tt></a></h3>
<p>String <strong>storage_format_name</strong> ()</p>
<p>Returns a string representing the storage format of the image.
Intended primarily for display (GUI) purposes, since using the integer
values in <tt class="docutils literal">Image.data.storage_format</tt> is more efficient.</p>
<p>See <a class="reference internal" href="#storage-formats">storage formats</a> for more information.</p>
</div>
<div class="section" id="memory-size">
<h3><a class="toc-backref" href="#toc-entry-13"><tt class="docutils literal">memory_size</tt></a></h3>
<p>Int <strong>memory_size</strong> ()</p>
<p>Returns the memory used by the underlying data of the image (in
bytes).  Note that this memory may be shared with other image views on
the same data.</p>
</div>
<div class="section" id="resolution">
<h3><a class="toc-backref" href="#toc-entry-14"><tt class="docutils literal">resolution</tt></a></h3>
<p>(read/write property)</p>
<p>The resolution of the image</p>
</div>
<div class="section" id="white">
<h3><a class="toc-backref" href="#toc-entry-15"><tt class="docutils literal">white</tt></a></h3>
<p>Pixel <strong>white</strong> ()</p>
<p>Returns the pixel value representing the color white for this image.</p>
</div>
<div class="section" id="black">
<h3><a class="toc-backref" href="#toc-entry-16"><tt class="docutils literal">black</tt></a></h3>
<p>Pixel <strong>black</strong> ()</p>
<p>Returns the pixel value representing the color black for this image.</p>
</div>
<div class="section" id="label">
<h3><a class="toc-backref" href="#toc-entry-17"><tt class="docutils literal">label</tt></a></h3>
<p>(read/write property)</p>
<p>The pixel label value for the Cc</p>
</div>
<div class="section" id="data">
<h3><a class="toc-backref" href="#toc-entry-18"><tt class="docutils literal">data</tt></a></h3>
<p>(read-only property)</p>
<p>Returns the underlying <a class="reference external" href="gamera.core.ImageData.html">ImageData</a> object.</p>
</div>
<div class="section" id="ncols">
<h3><a class="toc-backref" href="#toc-entry-19"><tt class="docutils literal">ncols</tt></a></h3>
<p>(int property)</p>
<p>The number of columns in the rectangle.</p>
</div>
<div class="section" id="nrows">
<h3><a class="toc-backref" href="#toc-entry-20"><tt class="docutils literal">nrows</tt></a></h3>
<p>(int property)</p>
<p>The number of rows in the rectangle.</p>
</div>
<div class="section" id="offset-x">
<h3><a class="toc-backref" href="#toc-entry-21"><tt class="docutils literal">offset_x</tt></a></h3>
<p>(int property)</p>
<p>The left edge of the rectangle in the logical coordinate space.</p>
</div>
<div class="section" id="offset-y">
<h3><a class="toc-backref" href="#toc-entry-22"><tt class="docutils literal">offset_y</tt></a></h3>
<p>(int property)</p>
<p>The upper edge of the rectable in the logical coordinate space.</p>
</div>
<div class="section" id="ul">
<h3><a class="toc-backref" href="#toc-entry-23"><tt class="docutils literal">ul</tt></a></h3>
<p>(Point property)</p>
<p>The upper-left coordinate of the rectangle in logical coordinate space.</p>
</div>
<div class="section" id="ur">
<h3><a class="toc-backref" href="#toc-entry-24"><tt class="docutils literal">ur</tt></a></h3>
<p>(Point property)</p>
<p>The upper-right coordinate of the rectangle in logical coordinate space.</p>
</div>
<div class="section" id="ll">
<h3><a class="toc-backref" href="#toc-entry-25"><tt class="docutils literal">ll</tt></a></h3>
<p>(Point property)</p>
<p>The lower-left coordinate of the rectangle in logical coordinate space.</p>
</div>
<div class="section" id="lr">
<h3><a class="toc-backref" href="#toc-entry-26"><tt class="docutils literal">lr</tt></a></h3>
<p>(Point property)</p>
<p>The lower-right coordinate of the rectangle in logical coordinate space.</p>
</div>
</div>
<div class="section" id="bounding-box">
<h2><a class="toc-backref" href="#toc-entry-27">Bounding box</a></h2>
<p>Bounding box operations on <tt class="docutils literal">Image</tt> objects are inherited from the
<a class="reference external" href="dimension_types.html#rect">Rect</a> class.</p>
</div>
<div class="section" id="classification">
<h2><a class="toc-backref" href="#toc-entry-28">Classification</a></h2>
<p>See <a class="reference external" href="classification.html">Classification plugins</a>.</p>
</div>
</div>
<div class="section" id="special-image-views">
<h1><a class="toc-backref" href="#toc-entry-29">Special image views</a></h1>
<p>There are two special image views on <tt class="docutils literal">ONEBIT</tt> images that only consider
specific pixel values to be black: <em>connected components</em> and <em>multilabel
connected components</em>. In most cases, you will need connected components;
multilabel connected components are only meant for very special use cases.</p>
<div class="section" id="connected-components">
<h2><a class="toc-backref" href="#toc-entry-30">Connected Components</a></h2>
<p>Connected components (<tt class="docutils literal">Cc</tt>) are a special kind of view on <tt class="docutils literal">ONEBIT</tt> image
data. The implementation (ab)uses the fact that <tt class="docutils literal">ONEBIT</tt> images are
actually stored as 16-bits-per-pixel data. Therefore all pixels belonging to
the same Cc are set to the same pixel value (the &quot;connected component label&quot;)
and pixels belonging to different Cc's have different pixel values.</p>
<p>Each Cc object defines a bounding box and a <tt class="docutils literal">label</tt> value which
indicates the pixel value that the Cc object corresponds to.
Pixels with that value will appear to be black, and pixels without
that value will appear to be white.</p>
<p>As a programmer using a Cc object, this detail should not matter
most of the time: it will behave as a standalone <tt class="docutils literal">ONEBIT</tt> image.
However, care should be taken when setting the values of a Cc
object: it may be possible to make pixels &quot;disappear&quot; by setting them
to a value other than <tt class="docutils literal">Cc.label</tt>.</p>
<p>Cc's behave like image views with the additional property <tt class="docutils literal">label</tt>.
You can remove a particular Cc with <tt class="docutils literal">fill_white</tt>:</p>
<div class="highlight"><pre><span></span><span class="c1"># remove all CCs with an aspect ration &gt; 3</span>
<span class="n">ccs</span> <span class="o">=</span> <span class="n">onebit</span><span class="o">.</span><span class="n">cc_analysis</span><span class="p">()</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">ccs</span><span class="p">:</span>
  <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span><span class="o">.</span><span class="n">ncols</span> <span class="o">&gt;</span> <span class="mf">3.0</span><span class="p">:</span>
     <span class="n">c</span><span class="o">.</span><span class="n">fill_white</span><span class="p">()</span>
</pre></div>
<p>You can even take a CC from one image and highlight its black pixels
on a different image:</p>
<div class="highlight"><pre><span></span><span class="c1"># mark all CCs with an aspect ration &gt; 3 in red</span>
<span class="c1"># without changing the original image</span>
<span class="n">ccs</span> <span class="o">=</span> <span class="n">onebit</span><span class="o">.</span><span class="n">cc_analysis</span><span class="p">()</span>
<span class="n">rgb</span> <span class="o">=</span> <span class="n">onebit</span><span class="o">.</span><span class="n">to_rgb</span><span class="p">()</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">ccs</span><span class="p">:</span>
  <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">nrows</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span><span class="o">.</span><span class="n">ncols</span> <span class="o">&gt;</span> <span class="mf">3.0</span><span class="p">:</span>
     <span class="n">rgb</span><span class="o">.</span><span class="n">highlight</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">RGBPixel</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
<div class="section" id="init">
<h3><a class="toc-backref" href="#toc-entry-31"><tt class="docutils literal">__init__</tt></a></h3>
<p>Creates a connected component representing part of a OneBit image.</p>
<p>It is rare to create one of these objects directly: most often you will just use cc_analysis to create connected components.</p>
<p>There are a number of ways to create a Cc:</p>
<blockquote>
<ul class="simple">
<li><strong>Cc</strong> (Image <em>image</em>, Int <em>label</em>, Point <em>upper_left</em>, Point <em>lower_right</em>)</li>
<li><strong>Cc</strong> (Image <em>image</em>, Int <em>label</em>, Point <em>upper_left</em>, Size <em>size</em>)</li>
<li><strong>Cc</strong> (Image <em>image</em>, Int <em>label</em>, Point <em>upper_left</em>, Dim <em>dim</em>)</li>
<li><strong>Cc</strong> (Image <em>image</em>, Int <em>label</em>, Rect <em>rectangle</em>)</li>
</ul>
</blockquote>
<p><strong>Deprecated forms:</strong></p>
<blockquote>
<ul class="simple">
<li><strong>Cc</strong> (Image <em>image</em>, Int <em>label</em>, Point <em>upper_left</em>, Dimensions <em>dimensions</em>)</li>
<li><strong>Cc</strong> (Image <em>image</em>, Int <em>label</em>, Int <em>offset_y</em>, Int <em>offset_x</em>, Int <em>nrows</em>, Int <em>ncols</em>)</li>
</ul>
</blockquote>
<dl class="docutils">
<dt><em>label</em></dt>
<dd>The pixel value used to represent this Cc.</dd>
</dl>
</div>
</div>
<div class="section" id="multi-label-connected-components">
<h2><a class="toc-backref" href="#toc-entry-32">Multi-Label Connected Components</a></h2>
<p>MultiLabelCCs (<tt class="docutils literal">MlCc</tt> on the python side, and <tt class="docutils literal">MultiLabelCC</tt> on the
C++ side) basically work in the same way as 'regular'
Connected Components. The difference between those two is the ability
of MlCcs to have multiple labels. Each label has an associated <tt class="docutils literal">Rect</tt>
representing its bounding box; the bounding box of the entire MlCc is
the closure of all label bounding boxes.</p>
<p>This special feature allows for building connected components which
actually consist of different parts, thus making it fast and easy to
create different variants of an MlCcs with some parts excluded. To
make this even more useful, each MlCc has an additional (optional)
property, the subpart neighborship relations. Note that these relationships
need to be provided by the user, in case he needs them.</p>
<p>Apart from the basic image methods, MlCcs offer a number of additional
functions as listed below.</p>
<div class="section" id="init-1">
<h3><a class="toc-backref" href="#toc-entry-33"><tt class="docutils literal">__init__</tt></a></h3>
<p>Creates a multi label connected component (MultiLabelCC) representing part of a OneBit image.</p>
<p>Most often you will create a MultiLabelCCs from a list of Cc's.</p>
<p>There are a number of ways to create a MultiLabelCC:</p>
<blockquote>
<ul class="simple">
<li><strong>MlCc</strong> (Image <em>image</em>, int <em>label</em>, Point <em>upper_left</em>, Point <em>lower_right</em>)</li>
<li><strong>MlCc</strong> (Image <em>image</em>, int <em>label</em>, Point <em>upper_left</em>, Size <em>size</em>)</li>
<li><strong>MlCc</strong> (Image <em>image</em>, int <em>label</em>, Point <em>upper_left</em>, Dim <em>dim</em>)</li>
<li><strong>MlCc</strong> (Image <em>image</em>, int <em>label</em>, Rect <em>rectangle</em>)</li>
<li><strong>MlCc</strong> (CcList <em>ccs</em>)</li>
</ul>
</blockquote>
<p><strong>Deprecated forms:</strong></p>
<blockquote>
<ul class="simple">
<li><strong>MlCc</strong> (Image <em>image</em>, int <em>label</em>, Point <em>upper_left</em>, Dimensions <em>dimensions</em>)</li>
<li><strong>MlCc</strong> (Image <em>image</em>, int <em>label</em>, Int <em>offset_y</em>, Int <em>offset_x</em>, Int <em>nrows</em>, Int <em>ncols</em>)</li>
</ul>
</blockquote>
</div>
<div class="section" id="has-label">
<h3><a class="toc-backref" href="#toc-entry-34"><tt class="docutils literal">has_label</tt></a></h3>
<p><strong>has_label</strong> (int <em>label</em>)</p>
<p>Returns whether a label belongs to the MlCc or not.</p>
</div>
<div class="section" id="get-labels">
<h3><a class="toc-backref" href="#toc-entry-35"><tt class="docutils literal">get_labels</tt></a></h3>
<p><strong>get_labels</strong> ()</p>
<p>Returns a list of all labels belonging to the MultiLabelCC.</p>
</div>
<div class="section" id="add-label">
<h3><a class="toc-backref" href="#toc-entry-36"><tt class="docutils literal">add_label</tt></a></h3>
<p><strong>add_label</strong> (int <em>label</em>, Rect <em>rect</em>)</p>
<p>Adds a label and a bounding box (for the label) to a MultiLabelCC. The bounding box of the MlCc is extended by the given <em>rect</em>.</p>
</div>
<div class="section" id="remove-label">
<h3><a class="toc-backref" href="#toc-entry-37"><tt class="docutils literal">remove_label</tt></a></h3>
<p><strong>remove_label</strong> (int <em>label</em>)</p>
<p>Removes a label from a MultiLabelCC. The bounding box of the MlCc is shrunk by the bounding box associated with the removed label as far as possible with respect to the other bounding boxes.</p>
</div>
<div class="section" id="relabel">
<h3><a class="toc-backref" href="#toc-entry-38"><tt class="docutils literal">relabel</tt></a></h3>
<p>Returns a new MlCc containing only the given labels. For computing the new bounding boxes, the bounding box information stored for each label are utilized. The neighborship information is lost in the returned MlCc.</p>
<p>This function is overloaded to return either a single or several new MlCc's:</p>
<p><strong>relabel</strong> (List&lt;int&gt; <em>l</em>)</p>
<p>Creates a single MultiLabelCC based on the current one.</p>
<div class="highlight"><pre><span></span><span class="n">new_mlcc</span> <span class="o">=</span> <span class="n">mlcc</span><span class="o">.</span><span class="n">relabel</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
<p>This returns a single MultiLabelCC which contains the labels 2,3,4.</p>
<p><strong>relabel</strong> (List&lt;List&lt;int&gt;&gt; <em>l</em>)</p>
<p>Creates a list of MultiLabelCC based on the current one.</p>
<div class="highlight"><pre><span></span><span class="n">new_mlcc_list</span> <span class="o">=</span> <span class="n">mlcc</span><span class="o">.</span><span class="n">relabel</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">]])</span>
</pre></div>
<p>This returns a list of two MultiLabelCCs. The first one contains the labels 2,3; the second one contains the label 4.</p>
</div>
<div class="section" id="convert-to-cc">
<h3><a class="toc-backref" href="#toc-entry-39"><tt class="docutils literal">convert_to_cc</tt></a></h3>
<p><strong>convert_to_cc</strong> ()</p>
<p>Converts the MultiLabelCC into a ConnectedComponent. All labels belonging to the MultiLabelCc are set to the value of the first label. After calling this method, the MultiLabelCc only has one label.</p>
</div>
<div class="section" id="convert-to-cc-list">
<h3><a class="toc-backref" href="#toc-entry-40"><tt class="docutils literal">convert_to_cc_list</tt></a></h3>
<p><strong>convert_to_cc_list</strong> ()</p>
<p>Converts the MultiLabelCC into a  list of ConnectedComponent.Each ConnectedComponent in the List represents one label of the MultiLabelCC.
For example: You have a MultiLabelCC with the labels 2, 3, 4. Therefore it would be transformed into a list of 3 ConnectedComponent, one for each label.</p>
</div>
<div class="section" id="get-neighbors">
<h3><a class="toc-backref" href="#toc-entry-41"><tt class="docutils literal">get_neighbors</tt></a></h3>
<p><strong>get_neighbors</strong> ()</p>
<p>Returns all pairs of neighbors that have been previously added with add_neighbors().</p>
</div>
<div class="section" id="add-neighbors">
<h3><a class="toc-backref" href="#toc-entry-42"><tt class="docutils literal">add_neighbors</tt></a></h3>
<p><strong>add_neighbors</strong> (int <em>i</em>, int <em>j</em>)</p>
<p>Adds a neighborhood relation to the MultiLabelCC.</p>
<p>This is entirely optional: neighborship relations are only stored, and can be returned with get_neighbors(), but are not used internally by MlCc.</p>
</div>
</div>
</div>
<div class="section" id="image-functions">
<h1><a class="toc-backref" href="#toc-entry-43">Image functions</a></h1>
<p>There are a number of free functions for dealing with images.</p>
<div class="section" id="file">
<h2><a class="toc-backref" href="#toc-entry-44">File</a></h2>
<div class="section" id="load-image">
<h3><a class="toc-backref" href="#toc-entry-45"><tt class="docutils literal">load_image</tt></a></h3>
<p><strong>load_image</strong> (FileOpen <em>filename</em>, Choice <em>storage_format</em> = <tt class="docutils literal">DENSE</tt>)</p>
<p>Load an image from the given filename.  At present, TIFF and PNG files are
supported.</p>
<dl class="docutils">
<dt><em>storage_format</em></dt>
<dd>The type of <a class="reference external" href="image_types.html#storage-formats">storage format</a> to use for the resulting image.</dd>
</dl>
</div>
<div class="section" id="image-info">
<h3><a class="toc-backref" href="#toc-entry-46"><tt class="docutils literal">image_info</tt></a></h3>
<p>ImageInfo <strong>image_info</strong> (FileOpen <em>filename</em>)</p>
<p>Retrieve information about an image file without loading it.</p>
<p>The result is an <a class="reference external" href="gamera.core.ImageInfo.html">ImageInfo</a> object about a given filename. The ImageInfo
object gives information such as the type (color, greyscale, onebit),
the bit-depth, resolution, size, etc.</p>
</div>
</div>
<div class="section" id="gui">
<h2><a class="toc-backref" href="#toc-entry-47">GUI</a></h2>
<div class="section" id="display-multi">
<h3><a class="toc-backref" href="#toc-entry-48"><tt class="docutils literal">display_multi</tt></a></h3>
<p><strong>display_multi</strong> (ImageList <em>list</em>)</p>
<p>Displays a list of images in a grid-like window.  This function has
no effect if the <a class="reference external" href="gui.html">Gamera GUI</a> is not running.</p>
</div>
</div>
</div>
</div>
<div class="footer">
<hr class="footer" />
<span class="raw-html"><div style="text-align:right;">For contact information, see <a href="http://gamera.informatik.hsnr.de/contact.html">http://gamera.informatik.hsnr.de/contact.html</a></div></span>
</div>
</body>
</html>
