==============================
Building and installing Gamera
==============================

Linux (and other \*nix)
=======================

Prerequisites
-------------

- Python 3.5 and later are supported, though Python 3.7 is
  recommended.

  You will need to have the headers (but not the complete source) to
  build Gamera from source code.  Most Linux distributions include
  these as a separate package (eg. ``python-dev`` or ``python-devel``).

- python3-pip

- libgtk-3-dev

- ``gcc`` version 3.1 or later.

- libtiff 3.5.x or later

- libpng 1.2.x or later

- wxPython 4.0.x or later

If any of these prerequisites is installed in a non standard directory,
you can use the environment variables ``CFLAGS`` and ``LDFLAGS`` to
pass its locations to the build script, e.g.::

  CFLAGS=-I/usr/local/include
  LDFLAGS=-L/usr/local/lib
  export CFLAGS LDFLAGS


Standard Build and Install
--------------------------

Gamera can be installed via pip. Open a
terminal and type::

  pip install git+https://github.com/hsnr-gamera/gamera-4#egg=gamera

By default, parallelization of the genetic algorithms is only compiled
into Gamera under Linux and with gcc version > 4.2, because we could only
get it running in this environment. If you are sure that you have unbroken
OpenMP support on your system, need to clone the git repo and edit the setup.py::

  git clone https://github.com/hsnr-gamera/gamera-4
  cd gamera-4
  sed -i 's/has_openmp = None/has_openmp = True/' setup.py
  pip install .

If Gamera is compiled with OpenMP on your system, but OpenMP does not work
on your system for some reason, you can switch it off with::

  git clone https://github.com/hsnr-gamera/gamera-4
  cd gamera-4
  sed -i 's/has_openmp = None/has_openmp = False/' setup.py
  pip install .


Running
-------

Run the ``gamera_gui`` script, which is installed in the ``bin`` directory of Python

.. note:: Running the script from the root of the source tree will not
  work, since it will not be able to find the compiled version of Gamera.


Mac OS-X
========

Earlier versions of Gamera ran on OS-X by using X11 as an emulation of
a standard Unix environment.  The current SVN version of Gamera now
uses Cocoa, and feels much more like a standard Macintosh
application.  Please follow the instructions for *either* X11 or Cocoa
install below.


Native (Cocoa) build
--------------------

Prerequisites
`````````````

Gamera installs out of the box on Mac OS-X 10.11 (El Capitan) and later.
The only prerequisite is to install XCode, which is shipped with the
OS-X installation DVD, but is not installed by default.


Standard Build and Install
``````````````````````````

Gamera is built using the Python-standard Distutils system.

To install Gamera (you'll need to have admin privileges)::

  pip install git+https://github.com/hsnr-gamera/gamera-4

On OS-X 10.11, the script ``gamera_gui`` is installed to ``/usr/local/bin``,
which is also in the default search PATH for programs.


Running
```````

Start the Terminal application and run the ``gamera_gui`` script.

.. note:: Running the script from the root of the source tree will not
  work, since it will not be able to find the compiled version of
  Gamera.

